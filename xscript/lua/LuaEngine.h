//------------------------------------------------------------------------
// * @filename: LuaEngine.h
// *
// * @brief: Lua引擎
// *
// * @author: XGM
// * @date: 2018/12/04
//------------------------------------------------------------------------
#pragma once

#include "xbase/Singleton.h"

class LuaStack;

class LuaEngine : public Singleton<LuaEngine>
{
protected:
	friend class Singleton<LuaEngine>;
	LuaEngine();
	~LuaEngine();
public:

	//------------------------------------------------------------------------
	// 初始化
	//------------------------------------------------------------------------
	bool Init();

	//------------------------------------------------------------------------
	// 获得lua堆栈
	//------------------------------------------------------------------------
	LuaStack* GetLuaStack();

	//------------------------------------------------------------------------
	// 执行代码块
	//------------------------------------------------------------------------
	int32_t ExecuteString(const char* pszCodes);

	//------------------------------------------------------------------------
	// 执行脚本文件
	//------------------------------------------------------------------------
	int32_t ExecuteScriptFile(const char* pszFileName);

	//------------------------------------------------------------------------
	// 执行全局函数
	//------------------------------------------------------------------------
	int32_t ExecuteGlobalFunction(const char* pszFuncName);

private:
	// lua堆栈
	LuaStack* m_pStack = nullptr;
};
